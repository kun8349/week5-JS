{"version":3,"sources":["all.js"],"names":["arr","totalObj","newData","axios","get","then","response","data","init","travelEvent","travelAdd","picListStep1","picListStep2","picListStep3","list","document","querySelector","searchNum","str","forEach","i","test","imgUrl","area","name","description","group","price","innerHTML","textContent","length","travelFilter","addEventListener","e","preventDefault","target","value","tempData","push","console","log","addTicketName","addTicketImgUrl","addTicketRegion","addTicketPrice","addTicketNum","addTicketRate","addTicketDescription","btn","obj","id","rate","clear","ary","Object","keys","x","reset","item","areaAry","chart","c3","generate","bindto","columns","type","donut","title","size","height","width"],"mappings":";;AAAA,IAAIA,GAAG,GAAG,EAAV;AACA,IAAMC,QAAQ,GAAG,EAAjB;AACA,IAAMC,OAAO,GAAG,EAAhB;AAEAC,KAAK,CAACC,GAAN,CAAU,6EAAV,EACGC,IADH,CACQ,UAAUC,QAAV,EAAmB;AAEvBN,EAAAA,GAAG,GAAGM,QAAQ,CAACC,IAAT,CAAcA,IAApB;AACAC,EAAAA,IAAI,CAACR,GAAD,CAAJ;AACAS,EAAAA,WAAW;AACXC,EAAAA,SAAS,GALc,CAOvB;;AACAC,EAAAA,YAAY,GARW,CASvB;;AACAC,EAAAA,YAAY,GAVW,CAWvB;;AACAC,EAAAA,YAAY;AAEb,CAfH;AAiBA,IAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,CAAb,C,CACA;;AACA,IAAMC,SAAS,GAAGF,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAlB,C,CACA;;AACA,SAASR,IAAT,CAAcD,IAAd,EAAmB;AACjB,MAAIW,GAAG,GAAG,EAAV;AACAlB,EAAAA,GAAG,CAACmB,OAAJ,CAAY,UAASC,CAAT,EAAW;AACrB,QAAIC,IAAI,6GAGKD,CAAC,CAACE,MAHP,wEAKyBF,CAAC,CAACG,IAL3B,yLAWkCH,CAAC,CAACI,IAXpC,oFAcFJ,CAAC,CAACK,WAdA,gPAoB8BL,CAAC,CAACM,KApBhC,0HAuB8BN,CAAC,CAACO,KAvBhC,qEAAR;AA4BAT,IAAAA,GAAG,IAAIG,IAAP;AACC,GA9BH;AA+BAP,EAAAA,IAAI,CAACc,SAAL,GAAiBV,GAAjB;AACAD,EAAAA,SAAS,CAACY,WAAV,2CAAgCtB,IAAI,CAACuB,MAArC;AACD;;AAKD,IAAMC,YAAY,GAAGhB,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAArB,C,CACA;;AACA,SAASP,WAAT,GAAsB;AACpBsB,EAAAA,YAAY,CAACC,gBAAb,CAA8B,QAA9B,EAAuC,UAASC,CAAT,EAAW;AAChDA,IAAAA,CAAC,CAACC,cAAF;AACA,QAAIhB,GAAG,GAAG,EAAV;AACAlB,IAAAA,GAAG,CAACmB,OAAJ,CAAY,UAASC,CAAT,EAAW;AACrB,UAAIC,IAAI,yHAGOD,CAAC,CAACE,MAHT,gFAK2BF,CAAC,CAACG,IAL7B,iNAWoCH,CAAC,CAACI,IAXtC,gGAcAJ,CAAC,CAACK,WAdF,wQAoBgCL,CAAC,CAACM,KApBlC,sIAuBgCN,CAAC,CAACO,KAvBlC,mFAAR;;AA4BA,UAAGM,CAAC,CAACE,MAAF,CAASC,KAAT,IAAkB,MAArB,EAA4B;AAC1BlB,QAAAA,GAAG,IAAIG,IAAP;AACAb,QAAAA,IAAI,CAACR,GAAD,CAAJ;AACA;AACD,OAJD,MAIM,IAAGiC,CAAC,CAACE,MAAF,CAASC,KAAT,IAAkBhB,CAAC,CAACG,IAAvB,EAA4B;AAChCL,QAAAA,GAAG,IAAIG,IAAP;AACA,YAAIgB,QAAQ,GAAG,EAAf;;AACA,YAAGjB,CAAC,CAACG,IAAF,KAAWU,CAAC,CAACE,MAAF,CAASC,KAAvB,EAA6B;AAC3BC,UAAAA,QAAQ,CAACC,IAAT,CAAclB,CAAd;AACAmB,UAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;AACD;;AACDpB,QAAAA,SAAS,CAACY,WAAV,2CAAgCQ,QAAQ,CAACP,MAAzC;AACD;AACF,KA1CD;AA2CAhB,IAAAA,IAAI,CAACc,SAAL,GAAiBV,GAAjB;AACD,GA/CD;AAgDD,C,CAGD;;;AACA,IAAMuB,aAAa,GAAG1B,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAtB;AACA,IAAM0B,eAAe,GAAG3B,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAAxB;AACA,IAAM2B,eAAe,GAAG5B,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAAxB;AACA,IAAM4B,cAAc,GAAG7B,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAAvB;AACA,IAAM6B,YAAY,GAAG9B,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAArB;AACA,IAAM8B,aAAa,GAAG/B,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAtB;AACA,IAAM+B,oBAAoB,GAAGhC,QAAQ,CAACC,aAAT,CAAuB,oBAAvB,CAA7B;AACA,IAAMgC,GAAG,GAAGjC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAZ;;AAEA,SAASN,SAAT,GAAoB;AAClBsC,EAAAA,GAAG,CAAChB,gBAAJ,CAAqB,OAArB,EAA6B,UAASC,CAAT,EAAW;AACtC,QAAIgB,GAAG,GAAG,EAAV;AACAA,IAAAA,GAAG,CAACC,EAAJ,GAASlD,GAAG,CAAC8B,MAAb;AACAmB,IAAAA,GAAG,CAACzB,IAAJ,GAAWiB,aAAa,CAACL,KAAzB;AACAa,IAAAA,GAAG,CAAC3B,MAAJ,GAAaoB,eAAe,CAACN,KAA7B;AACAa,IAAAA,GAAG,CAAC1B,IAAJ,GAAWoB,eAAe,CAACP,KAA3B;AACAa,IAAAA,GAAG,CAACtB,KAAJ,GAAYiB,cAAc,CAACR,KAA3B;AACAa,IAAAA,GAAG,CAACvB,KAAJ,GAAYmB,YAAY,CAACT,KAAzB;AACAa,IAAAA,GAAG,CAACE,IAAJ,GAAWL,aAAa,CAACV,KAAzB;AACAa,IAAAA,GAAG,CAACxB,WAAJ,GAAkBsB,oBAAoB,CAACX,KAAvC;AACApC,IAAAA,GAAG,CAACsC,IAAJ,CAASW,GAAT;AACAzC,IAAAA,IAAI,CAACR,GAAD,CAAJ;AACAoD,IAAAA,KAAK;AACL,QAAIC,GAAG,GAAGC,MAAM,CAACC,IAAP,CAAYtD,QAAZ,CAAV;AACAoD,IAAAA,GAAG,CAAClC,OAAJ,CAAY,UAACC,CAAD,EAAGoC,CAAH,EAAO;AACjB,UAAGpC,CAAC,KAAKuB,eAAe,CAACP,KAAzB,EAA+B;AAC7BnC,QAAAA,QAAQ,CAACmB,CAAD,CAAR,IAAe,CAAf;AACD;AACF,KAJD,EAdsC,CAmBtC;;AACAR,IAAAA,YAAY;AACZC,IAAAA,YAAY;AACZE,IAAAA,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,EAA0CyC,KAA1C;AACD,GAvBD;AAwBD;;AAED,SAAS9C,YAAT,GAAuB;AACrBX,EAAAA,GAAG,CAACmB,OAAJ,CAAY,UAACuC,IAAD,EAAQ;AAClB,QAAGzD,QAAQ,CAACyD,IAAI,CAACnC,IAAN,CAAX,EAAuB;AACrBtB,MAAAA,QAAQ,CAACyD,IAAI,CAACnC,IAAN,CAAR,IAAuB,CAAvB;AAED,KAHD,MAGK;AACHtB,MAAAA,QAAQ,CAACyD,IAAI,CAACnC,IAAN,CAAR,GAAsB,CAAtB;AACD;AACF,GAPD;AAQD;;AAKD,SAASX,YAAT,GAAuB;AACrB,MAAM+C,OAAO,GAAGL,MAAM,CAACC,IAAP,CAAYtD,QAAZ,CAAhB;AACE0D,EAAAA,OAAO,CAACxC,OAAR,CAAgB,UAACuC,IAAD,EAAQ;AACtB,QAAIL,GAAG,GAAG,EAAV;AACAA,IAAAA,GAAG,CAACf,IAAJ,CAASoB,IAAT;AACAL,IAAAA,GAAG,CAACf,IAAJ,CAASrC,QAAQ,CAACyD,IAAD,CAAjB;AACAxD,IAAAA,OAAO,CAACoC,IAAR,CAAae,GAAb;AACD,GALD;AAMH;;AAGD,SAASxC,YAAT,GAAuB;AACrB,MAAM+C,KAAK,GAAGC,EAAE,CAACC,QAAH,CAAY;AACxBC,IAAAA,MAAM,EAAE,QADgB;AAExBxD,IAAAA,IAAI,EAAE;AACJyD,MAAAA,OAAO,EAAE9D,OADL;AAEJ+D,MAAAA,IAAI,EAAG;AAFH,KAFkB;AAMxBC,IAAAA,KAAK,EAAE;AACLC,MAAAA,KAAK,EAAE;AADF,KANiB;AASxBC,IAAAA,IAAI,EAAE;AACJC,MAAAA,MAAM,EAAE,GADJ;AAEJC,MAAAA,KAAK,EAAE;AAFH;AATkB,GAAZ,CAAd;AAcD;;AACD,SAASlB,KAAT,GAAgB;AACdlD,EAAAA,OAAO,CAAC4B,MAAR,GAAiB,CAAjB;AACD","file":"all.js","sourcesContent":["let arr = [];\nconst totalObj = {};\nconst newData = [];\n\naxios.get('https://raw.githubusercontent.com/hexschool/js-training/main/travelApi.json')\n  .then(function (response){\n    \n    arr = response.data.data;\n    init(arr);\n    travelEvent();\n    travelAdd();\n    \n    // step 1:totalObj 會變成 {高雄: 1, 台北: 1, 台中: 1}\n    picListStep1();\n    // step 2:newData = [[\"高雄\", 1], [\"台北\",1], [\"台中\", 1]]\n    picListStep2();\n    // step 3:將 newData 丟入 c3 產生器\n    picListStep3();\n    \n  })\n\nconst list = document.querySelector('.ticketCard-area');\n// console.log(test);\nconst searchNum = document.querySelector('.num');\n//預設執行函式\nfunction init(data){\n  let str = '';\n  arr.forEach(function(i){\n    let test = `<li class=\"ticketCard\">\n  <div class=\"ticketCard-img\">\n    <a href=\"#\">\n      <img src=${i.imgUrl} alt=\"\">\n    </a>\n    <div class=\"ticketCard-region\">${i.area}</div>\n    <div class=\"ticketCard-rank\">10</div>\n  </div>\n  <div class=\"ticketCard-content\">\n    <div>\n      <h3>\n        <a href=\"#\" class=\"ticketCard-name\">${i.name}</a>\n      </h3>\n      <p class=\"ticketCard-description\">\n        ${i.description}\n      </p>\n    </div>\n    <div class=\"ticketCard-info\">\n      <p class=\"ticketCard-num\">\n        <span><i class=\"fas fa-exclamation-circle\"></i></span>\n        剩下最後 <span id=\"ticketCard-num\"> ${i.group} </span> 組\n      </p>\n      <p class=\"ticketCard-price\">\n        TWD <span id=\"ticketCard-price\">${i.price}</span>\n      </p>\n    </div>\n  </div>\n                </li>`;\n    str += test;\n    })\n  list.innerHTML = str;  \n  searchNum.textContent = `本次搜尋共${data.length}筆資料`;\n}\n\n\n\n\nconst travelFilter = document.querySelector('.regionSearch');\n//篩選監聽事件\nfunction travelEvent(){\n  travelFilter.addEventListener('change',function(e){\n    e.preventDefault();\n    let str = '';\n    arr.forEach(function(i){\n      let test = `<li class=\"ticketCard\">\n      <div class=\"ticketCard-img\">\n        <a href=\"#\">\n          <img src=${i.imgUrl} alt=\"\">\n        </a>\n        <div class=\"ticketCard-region\">${i.area}</div>\n        <div class=\"ticketCard-rank\">10</div>\n      </div>\n      <div class=\"ticketCard-content\">\n        <div>\n          <h3>\n            <a href=\"#\" class=\"ticketCard-name\">${i.name}</a>\n          </h3>\n          <p class=\"ticketCard-description\">\n            ${i.description}\n          </p>\n        </div>\n        <div class=\"ticketCard-info\">\n          <p class=\"ticketCard-num\">\n            <span><i class=\"fas fa-exclamation-circle\"></i></span>\n            剩下最後 <span id=\"ticketCard-num\"> ${i.group} </span> 組\n          </p>\n          <p class=\"ticketCard-price\">\n            TWD <span id=\"ticketCard-price\">${i.price}</span>\n          </p>\n        </div>\n      </div>\n                  </li>`;\n      if(e.target.value == '全部地區'){\n        str += test;\n        init(arr);\n        return;\n      }else if(e.target.value == i.area){\n        str += test;\n        let tempData = [];\n        if(i.area === e.target.value){\n          tempData.push(i);\n          console.log(tempData);\n        }\n        searchNum.textContent = `本次搜尋共${tempData.length}筆資料`;\n      }\n    })\n    list.innerHTML = str; \n  })\n}\n\n\n//新增事件\nconst addTicketName = document.querySelector('.ticketName');\nconst addTicketImgUrl = document.querySelector('.ticketImgUrl');\nconst addTicketRegion = document.querySelector('.ticketRegion');\nconst addTicketPrice = document.querySelector('.ticketPrice');\nconst addTicketNum = document.querySelector('.ticketNum');\nconst addTicketRate = document.querySelector('.ticketRate');\nconst addTicketDescription = document.querySelector('.ticketDescription');\nconst btn = document.querySelector('.btn');\n\nfunction travelAdd(){\n  btn.addEventListener('click',function(e){\n    let obj = {};\n    obj.id = arr.length;\n    obj.name = addTicketName.value;\n    obj.imgUrl = addTicketImgUrl.value;\n    obj.area = addTicketRegion.value;\n    obj.price = addTicketPrice.value;\n    obj.group = addTicketNum.value;\n    obj.rate = addTicketRate.value;\n    obj.description = addTicketDescription.value;\n    arr.push(obj);\n    init(arr);\n    clear();\n    let ary = Object.keys(totalObj);\n    ary.forEach((i,x)=>{\n      if(i === addTicketRegion.value){\n        totalObj[i] += 1;\n      }\n    })\n    //物件 \n    picListStep2();\n    picListStep3();\n    document.querySelector(\".addTicket-form\").reset();\n  })\n}\n\nfunction picListStep1(){\n  arr.forEach((item)=>{ \n    if(totalObj[item.area]){\n      totalObj[item.area] += 1;\n      \n    }else{\n      totalObj[item.area] = 1;\n    }\n  })\n}\n\n\n\n\nfunction picListStep2(){\n  const areaAry = Object.keys(totalObj);\n    areaAry.forEach((item)=>{\n      let ary = [];\n      ary.push(item);\n      ary.push(totalObj[item]);\n      newData.push(ary);\n    })\n}\n\n\nfunction picListStep3(){\n  const chart = c3.generate({\n    bindto: \"#chart\",\n    data: {\n      columns: newData,\n      type : 'donut',\n    },\n    donut: {\n      title: \"地區\"\n    },\n    size: {\n      height: 200,\n      width: 200\n    }\n  });\n}\nfunction clear(){\n  newData.length = 0;\n}\n\n\n  \n\n"]}