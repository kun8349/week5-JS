{"version":3,"sources":["all.js"],"names":["arr","totalObj","newData","axios","get","then","response","data","init","travelEvent","travelAdd","picListStep1","Object","entries","picListStep3","console","log","err","alert","list","document","querySelector","searchNum","str","forEach","i","test","imgUrl","area","name","description","group","price","innerHTML","textContent","length","travelFilter","addEventListener","e","preventDefault","val","target","value","tempData","push","addTicketName","addTicketImgUrl","addTicketRegion","addTicketPrice","addTicketNum","addTicketRate","addTicketDescription","btn","obj","id","rate","clear","ary","keys","x","reset","item","picListStep2","areaAry","chart","c3","generate","bindto","columns","type","colors","台北","台中","高雄","donut","title","width","label","show","size","height"],"mappings":"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","file":"all.js","sourcesContent":["let arr = [];\nconst totalObj = {};\nlet newData = [];\n\naxios.get('https://raw.githubusercontent.com/hexschool/js-training/main/travelApi.json')\n  .then(function (response){\n    \n    arr = response.data.data;\n    init(arr);\n    travelEvent();\n    travelAdd();\n    \n    // step 1:totalObj 會變成 {高雄: 1, 台北: 1, 台中: 1}\n    picListStep1();\n    // step 2:newData = [[\"高雄\", 1], [\"台北\",1], [\"台中\", 1]]\n    newData = Object.entries(totalObj);\n    // step 3:將 newData 丟入 c3 產生器\n    picListStep3();\n    console.log(newData);\n  })\n  .catch(function(err){\n    alert(err);\n  })\n\nconst list = document.querySelector('.ticketCard-area');\nconst searchNum = document.querySelector('.num');\n//預設執行函式\nfunction init(data){\n  let str = '';\n  data.forEach(function(i){\n    let test = `<li class=\"ticketCard\">\n  <div class=\"ticketCard-img\">\n    <a href=\"#\">\n      <img src=${i.imgUrl} alt=\"\">\n    </a>\n    <div class=\"ticketCard-region\">${i.area}</div>\n    <div class=\"ticketCard-rank\">10</div>\n  </div>\n  <div class=\"ticketCard-content\">\n    <div>\n      <h3>\n        <a href=\"#\" class=\"ticketCard-name\">${i.name}</a>\n      </h3>\n      <p class=\"ticketCard-description\">\n        ${i.description}\n      </p>\n    </div>\n    <div class=\"ticketCard-info\">\n      <p class=\"ticketCard-num\">\n        <span><i class=\"fas fa-exclamation-circle\"></i></span>\n        剩下最後 <span id=\"ticketCard-num\"> ${i.group} </span> 組\n      </p>\n      <p class=\"ticketCard-price\">\n        TWD <span id=\"ticketCard-price\">${i.price}</span>\n      </p>\n    </div>\n  </div>\n                </li>`;\n    str += test;\n    })\n  list.innerHTML = str;  \n  searchNum.textContent = `本次搜尋共${data.length}筆資料`;\n}\n\n\n\n\nconst travelFilter = document.querySelector('.regionSearch');\n//篩選監聽事件\nfunction travelEvent(){\n  travelFilter.addEventListener('change',function(e){\n    e.preventDefault();\n    const val = e.target.value; //點選取 台北 台中 高雄的value\n    if(val === '全部地區'){\n      init(arr);\n      return;\n    }else{\n      let tempData = [];\n      arr.forEach((i)=>{\n        if(i.area === val){\n          tempData.push(i);\n        }\n      })\n      init(tempData);\n    }\n    \n    // let str = '';\n    // arr.forEach(function (i) {\n    //   let test = `<li class=\"ticketCard\">\n    //   <div class=\"ticketCard-img\">\n    //     <a href=\"#\">\n    //       <img src=${i.imgUrl} alt=\"\">\n    //     </a>\n    //     <div class=\"ticketCard-region\">${i.area}</div>\n    //     <div class=\"ticketCard-rank\">10</div>\n    //   </div>\n    //   <div class=\"ticketCard-content\">\n    //     <div>\n    //       <h3>\n    //         <a href=\"#\" class=\"ticketCard-name\">${i.name}</a>\n    //       </h3>\n    //       <p class=\"ticketCard-description\">\n    //         ${i.description}\n    //       </p>\n    //     </div>\n    //     <div class=\"ticketCard-info\">\n    //       <p class=\"ticketCard-num\">\n    //         <span><i class=\"fas fa-exclamation-circle\"></i></span>\n    //         剩下最後 <span id=\"ticketCard-num\"> ${i.group} </span> 組\n    //       </p>\n    //       <p class=\"ticketCard-price\">\n    //         TWD <span id=\"ticketCard-price\">${i.price}</span>\n    //       </p>\n    //     </div>\n    //   </div>\n    //               </li>`;\n    //   if (e.target.value == '全部地區') {\n    //     str += test;\n    //     init(arr);\n    //     return;\n    //   } else if (e.target.value == i.area) {\n    //     str += test;\n    //     let tempData = [];\n    //     if (i.area === e.target.value) {\n    //       tempData.push(i);\n    //       console.log(tempData);\n    //     }\n    //     searchNum.textContent = `本次搜尋共${tempData.length}筆資料`;\n    //   }\n    // })\n    // list.innerHTML = str; \n  })\n}\n\n\n//新增事件\nconst addTicketName = document.querySelector('.ticketName');\nconst addTicketImgUrl = document.querySelector('.ticketImgUrl');\nconst addTicketRegion = document.querySelector('.ticketRegion');\nconst addTicketPrice = document.querySelector('.ticketPrice');\nconst addTicketNum = document.querySelector('.ticketNum');\nconst addTicketRate = document.querySelector('.ticketRate');\nconst addTicketDescription = document.querySelector('.ticketDescription');\nconst btn = document.querySelector('.btn');\n\nfunction travelAdd(){\n  btn.addEventListener('click',function(e){\n    let obj = {};\n    obj.id = arr.length;\n    obj.name = addTicketName.value;\n    obj.imgUrl = addTicketImgUrl.value;\n    obj.area = addTicketRegion.value;\n    obj.price = addTicketPrice.value;\n    obj.group = addTicketNum.value;\n    obj.rate = addTicketRate.value;\n    obj.description = addTicketDescription.value;\n    arr.push(obj);\n    init(arr);\n    \n    clear();\n    \n    let ary = Object.keys(totalObj);\n    ary.forEach((i,x)=>{\n      if(i === addTicketRegion.value){\n        totalObj[i] += 1;\n      }\n    })\n    //物件 \n    newData = Object.entries(totalObj);\n    picListStep3();\n    document.querySelector(\".addTicket-form\").reset();\n  })\n}\n\nfunction picListStep1(){\n  arr.forEach((item)=>{ \n    if(totalObj[item.area]){\n      totalObj[item.area] += 1;\n      \n    }else{\n      totalObj[item.area] = 1;\n    }\n  })\n}\n\n\n\n//可用Object.entries()替代\nfunction picListStep2(){\n  const areaAry = Object.keys(totalObj);\n    areaAry.forEach((item)=>{\n      let ary = [];\n      ary.push(item);\n      ary.push(totalObj[item]);\n      newData.push(ary);\n    })\n}\n\n\nfunction picListStep3(){\n  const chart = c3.generate({\n    bindto: \"#chart\",\n\n    data: {\n      columns: newData,\n      type : 'donut',\n      //修改圖表顏色,包在data裡面\n      colors: {\n        台北: \"#6A6AFF\",\n        台中: \"#2894FF\",\n        高雄: \"#00FFFF\"\n      },\n    },\n    donut: {\n      title: \"地區\",\n      //修改圖表粗細,包在donut裡面\n      width: 15,\n      label:{\n        show:false,\n      }\n    },\n    //修改圖表大小\n    size: {\n      height: 200,\n      width: 200\n    },\n  });\n}\nfunction clear(){\n  newData.length = 0;\n}\n\n\n  \n\n"]}